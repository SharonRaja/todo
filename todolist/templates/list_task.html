{% extends "layout.html" %}
{% load static %}

{% block additional_js_css %}
<link rel="stylesheet" href="{% static 'todolist/css/todolist.css' %}">
<script src="{% static 'todolist/js/todolist.js' %}"></script>
{% endblock additional_js_css %}


{% block title %}
    Home
{% endblock %}


{% block content %}
  <h1>Your Tasks</h1>
  <div class="border border-1 rounded-3">
  <ul class="list-group">
    <div class="task-list-panel">
    {% for task in tasks %}
      <li class="list-group-item p-0">
        <div class="d-flex justify-content-between align-items-center ">
          <div class="d-flex justify-content-between align-items-center">
            <div class="mb-0 border-end border-2 p-2">
              <input
                class="form-check-input custom-checkbox"
                type="checkbox"
                id="task-{{ task.id }}"
                {% if task.is_done %}checked{% endif %}
                aria-label="Mark task {{ task.id }} as done"
              >
            </div>
            <div class="me-2">
              <p class="ms-3 mb-0 task-text">{{ task.task_detail }}</p>
            </div>
          </div>
          <div class="pe-3">
            {% if task.tag_id %}
            <span class="badge bg-secondary">{{ task.tag_id.tag_name }}</span>
            {% endif %}
          </div>

        </div>
        
      </li>
    {% empty %}
      <li class="list-group-item">
        No tasks found.
      </li>
    {% endfor %}
    </div>
    <form action="{% url 'todolist:add_task' %}" method="POST">
      {% csrf_token %}
      <div class="d-flex">
        <div class="flex-grow-1" >
         {% comment %} <textarea class="form-control rounded-top-0 task-input" id="exampleFormControlTextarea1" rows="2"></textarea>  {% endcomment %}
         {{ form.task_detail }}
        </div>
        <div class="d-flex">
          {{ form.tag_id }}
        </div>
        <div class="d-flex">
        <button type="submit" class="btn btn-primary rounded-start-0 rounded-top-0">Submit</button>
        </div>
        
      </div>
      
    </form>     

  </ul>
  </div>
  </div>
{% endblock content%}
